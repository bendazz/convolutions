<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Convolution Explorer — Image Matrix & 3×3 Kernel</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <header class="app-header">
      <h1>Convolution Explorer</h1>
    </header>

    <div class="top-controls">
      <label for="problem-select">Problem:</label>
      <select id="problem-select" aria-label="Select a practice problem"></select>
    </div>

    

    <main class="app">
      <div class="app-row">
      <section class="panel">
        <div class="panel-header">
          <h2>Image Matrix (7×7)</h2>
        </div>
        <div id="image-grid" class="grid" aria-label="7 by 7 image grid"></div>
        <div class="legend" id="image-legend" aria-hidden="true">
          <span>Low</span>
          <span class="gradient gradient-image" aria-hidden="true"></span>
          <span>High</span>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Kernel (3×3)</h2>
        </div>
        <div id="kernel-grid" class="grid kernel" aria-label="3 by 3 kernel grid"></div>
        <div class="legend" id="kernel-legend" aria-hidden="true">
          <span>Negative</span>
          <span class="gradient gradient-kernel" aria-hidden="true"></span>
          <span>Positive</span>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Result (5×5)</h2>
          <div class="controls">
            <button id="show-all" title="Compute all positions and fill the entire result grid">Show All</button>
            <button id="copy-numpy" title="Copy NumPy code for this image and kernel">Copy NumPy</button>
            <button id="step-once" title="Move the kernel one position and compute the output at that location">Step</button>
          </div>
        </div>
        <div id="result-grid" class="grid result" aria-label="5 by 5 result grid"></div>
      </section>
      </div>

  <div class="app-row">
  <!-- Same-padding demo (output same size as input) -->
      <section class="panel">
        <div class="panel-header">
          <h2>Image Matrix (same-padding)</h2>
        </div>
        <div id="image2-grid" class="grid" aria-label="image grid (same padding)"></div>
        <div class="legend" aria-hidden="true">
          <span>Low</span>
          <span class="gradient gradient-image" aria-hidden="true"></span>
          <span>High</span>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Kernel (same)</h2>
        </div>
        <div id="kernel2-grid" class="grid kernel" aria-label="kernel grid (same padding)"></div>
        <div class="legend" aria-hidden="true">
          <span>Negative</span>
          <span class="gradient gradient-kernel" aria-hidden="true"></span>
          <span>Positive</span>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <h2>Result (same size)</h2>
          <div class="controls">
            <button id="show2-all" title="Compute all positions with padding and fill the entire result grid">Show All</button>
            <button id="copy2-numpy" title="Copy NumPy code for this image and kernel">Copy NumPy</button>
            <button id="step2-once" title="Move the kernel one position (same padding) and compute">Step</button>
          </div>
        </div>
        <div id="result2-grid" class="grid result" aria-label="result grid (same size)"></div>
      </section>
      </div>

      <!-- MNIST-like practice: paste result and render transformed image -->
      <div class="app-row">
        <section class="panel">
          <div class="panel-header">
            <h2>MNIST Image (28×28)</h2>
          </div>
          <div class="legend" aria-hidden="true">
            <span>Low</span>
            <span class="gradient gradient-image" aria-hidden="true"></span>
            <span>High</span>
          </div>
          <canvas id="mnist-original-canvas" class="img-canvas" width="160" height="160" aria-label="original image preview"></canvas>
        </section>

        <section class="panel">
          <div class="panel-header">
            <h2>Kernel (3×3)</h2>
            <div class="controls">
              <button id="mnist-new" title="Load a new MNIST image and kernel">New Problem</button>
              <button id="mnist-copy" title="Copy NumPy code for this MNIST image and kernel">Copy NumPy</button>
            </div>
          </div>
          <p id="kernel3-desc" class="kernel-desc">Function: Edge detection (Sobel X)</p>
          <div id="kernel3-grid" class="grid kernel" aria-label="mnist-like kernel grid"></div>
        </section>

        <section class="panel">
          <div class="panel-header">
            <h2>Your Result (paste)</h2>
            <div class="controls">
              <button id="mnist-render" title="Parse the pasted matrix and render the transformed image">Render</button>
            </div>
          </div>
          <textarea id="mnist-paste" class="paste" rows="7" placeholder="Paste a matrix like from Colab, e.g.:\n[8.0, 8.0, 0.0, -8.0, -8.0]\n[8.0, 8.0, 0.0, -8.0, -8.0]\n[8.0, 8.0, 0.0, -8.0, -8.0]\n[8.0, 8.0, 0.0, -8.0, -8.0]\n[8.0, 8.0, 0.0, -8.0, -8.0]"></textarea>
          <div id="mnist-error" class="error" role="alert" aria-live="polite"></div>
          <canvas id="mnist-canvas" class="img-canvas" width="160" height="160" aria-label="rendered transformed image"></canvas>
        </section>
      </div>
    </main>

    <hr class="section-divider" />

    <div class="app">
      <div class="app-row">
        <section class="panel">
          <div class="panel-header">
            <h2>RGB Image Matrices (7×7)</h2>
          </div>
          <div class="rgb-channel">
            <div class="rgb-label" aria-hidden="true">R</div>
            <div id="imageR-grid" class="grid" aria-label="7 by 7 image grid (Red)"></div>
          </div>
          <div class="rgb-channel">
            <div class="rgb-label" aria-hidden="true">G</div>
            <div id="imageG-grid" class="grid" aria-label="7 by 7 image grid (Green)"></div>
          </div>
          <div class="rgb-channel">
            <div class="rgb-label" aria-hidden="true">B</div>
            <div id="imageB-grid" class="grid" aria-label="7 by 7 image grid (Blue)"></div>
          </div>
          <div class="legend" aria-hidden="true">
            <span>Low</span>
            <span class="gradient gradient-image" aria-hidden="true"></span>
            <span>High</span>
          </div>
        </section>

        <section class="panel">
          <div class="panel-header">
            <h2>Kernel (3×3 × 3 channels)</h2>
          </div>
          <div class="rgb-channel">
            <div class="rgb-label" aria-hidden="true">R</div>
            <div id="kernelR-grid" class="grid kernel" aria-label="3 by 3 kernel grid (Red)"></div>
          </div>
          <div class="rgb-channel">
            <div class="rgb-label" aria-hidden="true">G</div>
            <div id="kernelG-grid" class="grid kernel" aria-label="3 by 3 kernel grid (Green)"></div>
          </div>
          <div class="rgb-channel">
            <div class="rgb-label" aria-hidden="true">B</div>
            <div id="kernelB-grid" class="grid kernel" aria-label="3 by 3 kernel grid (Blue)"></div>
          </div>
          <div class="legend" aria-hidden="true">
            <span>Negative</span>
            <span class="gradient gradient-kernel" aria-hidden="true"></span>
            <span>Positive</span>
          </div>
        </section>

        <section class="panel">
          <div class="panel-header">
            <h2>Result (5×5)</h2>
            <div class="controls">
              <button id="show-all-rgb" title="Compute all positions for RGB and fill the entire result grid">Show All</button>
              <button id="copy-numpy-rgb" title="Copy NumPy code for these RGB images and kernel">Copy NumPy</button>
              <button id="step-once-rgb" title="Move the kernel one position and compute the output at that location (RGB)">Step</button>
            </div>
          </div>
          <div id="result-grid-rgb" class="grid result" aria-label="5 by 5 result grid (RGB)"></div>
        </section>
      </div>
    </div>

    <hr class="section-divider" />

    <div class="app">
      <div class="app-row">
        <section class="panel">
          <div class="panel-header">
            <h2>Upload & Convolve (grayscale)</h2>
            <div class="controls">
              <input id="upload-image" type="file" accept="image/*" />
              <select id="upload-kernel-select" aria-label="Choose a kernel"></select>
            </div>
          </div>
          <div class="controls inline" aria-hidden="true">
            <span>Valid convolution; output shrinks by (k−1) each side.</span>
          </div>
          <canvas id="upload-original-canvas" class="img-canvas" width="160" height="160" aria-label="uploaded image preview"></canvas>
          <canvas id="upload-conv-canvas" class="img-canvas" width="160" height="160" aria-label="convolved image"></canvas>
        </section>
      </div>
    </div>

    <script src="./script.js"></script>
  </body>
</html>
